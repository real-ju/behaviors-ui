import{e,f as l,g as t,o as a,q as o,l as s,c as r,w as i,F as n,u,k as d,a as m,j as y,b as p,t as f,m as c,h as v,i as g,S as h,_ as k,s as x,r as _,d as F}from"./index-0f8f99ee.js";import{B as S}from"./index.7dcf5b2c.js";import{a as I,B as w}from"./index.d740dbd0.js";const T=""+new URL("empty-eb76e85d.png",import.meta.url).href,z=k(e({name:"BeLazyList",props:{modelValue:{type:Array,default:()=>[]},proxy:{type:Boolean,default:!0},minHeight:{type:String,default:"200rpx"},autoLoad:{type:Boolean,default:!0},moreIcon:{type:[Object,Boolean],default:!0},moreText:{type:Object,default:()=>({loadmore:"加载更多",loading:"加载中…",nomore:"没有更多了"})},moreFontSize:{type:String,default:"26rpx"},moreFontColor:{type:String,default:"#999999"},showEmptyTip:{type:Boolean,default:!0},emptyImageUrl:{type:String,default:T},emptyImageWidth:{type:String,default:"200rpx"},emptyText:{type:String,default:"暂无内容"},emptyFontSize:{type:String,default:"26rpx"},emptyFontColor:{type:String,default:"#aaaaaa"},emptyFontTop:{type:String,default:"50rpx"},pullDownRefresh:{type:Boolean,default:!1},refresherColor:{type:String,default:"#aaaaaa"}},emits:["update:modelValue","load"],setup(e,{expose:k,emit:x}){const _=e,F=l(!1),T=l(!1),z=l(!1),b=l(1),C=l(!1),$=t((()=>_.modelValue.length)),V=t((()=>_.showEmptyTip&&z.value&&0===$.value)),B=t((()=>!(z.value&&0===$.value))),j=()=>{z.value||T.value||(T.value=!0,x("load",b.value,L,R,!F.value))},L=e=>{if(e&&e.length>0){const l=1===b.value?e:[..._.modelValue,...e];x("update:modelValue",l),b.value++}else z.value=!0;T.value=!1,F.value||(F.value=!0),C.value&&(C.value=!1)},R=()=>{T.value=!1,F.value||(F.value=!0),C.value&&(C.value=!1)},U=(e=!1)=>{e||(x("update:modelValue",[]),F.value=!1),T.value=!1,z.value=!1,b.value=1,j()},D=(e=!1)=>{C.value=!0,F.value?e?U():U(!0):c((()=>{C.value=!1}))};return _.autoLoad&&j(),k({loadMore:j,reset:U,refresh:D}),(l,t)=>{const c=v,k=g,x=h;return a(),o(n,null,[s(" 组件代理触底 "),e.proxy?(a(),r(x,{key:0,class:"list-wrapper",style:y({"--refresher-color":e.refresherColor}),"scroll-y":"",onScrolltolower:j,"refresher-enabled":e.pullDownRefresh,"refresher-triggered":C.value,"refresher-background":"rgba(255, 255, 255, 0)",onRefresherrefresh:t[0]||(t[0]=e=>D())},{default:i((()=>[F.value?(a(),o(n,{key:0},[u($)>0?d(l.$slots,"default",{key:0},void 0,!0):s("v-if",!0),u(V)?d(l.$slots,"empty",{key:1},(()=>[m(k,{class:"empty-tip"},{default:i((()=>[m(c,{class:"icon",mode:"widthFix",src:e.emptyImageUrl,style:y({width:e.emptyImageWidth})},null,8,["src","style"]),m(k,{class:"text",style:y({"font-size":e.emptyFontSize,color:e.emptyFontColor,marginTop:e.emptyFontTop})},{default:i((()=>[p(f(e.emptyText),1)])),_:1},8,["style"])])),_:1})]),!0):s("v-if",!0),u(B)?d(l.$slots,"more",{key:2,loading:T.value,finished:z.value,loadMore:j},(()=>[m(k,{class:"more-area",style:y({"font-size":e.moreFontSize,color:e.moreFontColor}),onClick:j},{default:i((()=>[z.value?(a(),r(k,{key:1,class:"tip disable-tip"},{default:i((()=>[p(f(e.moreText.nomore),1)])),_:1})):(a(),o(n,{key:0},[T.value?(a(),r(k,{key:1,class:"tip"},{default:i((()=>[!1!==e.moreIcon?(a(),o(n,{key:0},[!0===e.moreIcon?(a(),r(c,{key:0,class:"loading-icon",style:y({width:e.moreFontSize,height:e.moreFontSize}),src:u(I)},null,8,["style","src"])):e.moreIcon?(a(),r(S,{key:1,class:"loading-icon","font-family":e.moreIcon.fontFamily,prefix:e.moreIcon.prefix,name:e.moreIcon.name},null,8,["font-family","prefix","name"])):s("v-if",!0)],64)):s("v-if",!0),p(" "+f(e.moreText.loading),1)])),_:1})):(a(),r(k,{key:0,class:"tip"},{default:i((()=>[p(f(e.moreText.loadmore),1)])),_:1}))],64))])),_:1},8,["style"])]),!0):s("v-if",!0)],64)):(a(),o(n,{key:1},[l.$slots.loading?(a(),r(w,{key:0},{default:i((()=>[d(l.$slots,"loading",{},void 0,!0)])),_:3})):(a(),r(w,{key:1}))],64))])),_:3},8,["style","refresher-enabled","refresher-triggered"])):(a(),o(n,{key:1},[s(" 自定义触底 "),m(k,{class:"list-wrapper unproxy-list-wrapper",style:y({minHeight:e.minHeight})},{default:i((()=>[F.value?(a(),o(n,{key:0},[u($)>0?d(l.$slots,"default",{key:0},void 0,!0):s("v-if",!0),u(V)?d(l.$slots,"empty",{key:1},(()=>[m(k,{class:"empty-tip"},{default:i((()=>[m(c,{class:"icon",mode:"widthFix",src:e.emptyImageUrl,style:y({width:e.emptyImageWidth})},null,8,["src","style"]),m(k,{class:"text",style:y({"font-size":e.emptyFontSize,color:e.emptyFontColor,marginTop:e.emptyFontTop})},{default:i((()=>[p(f(e.emptyText),1)])),_:1},8,["style"])])),_:1})]),!0):s("v-if",!0),u(B)?d(l.$slots,"more",{key:2,loading:T.value,finished:z.value,loadMore:j},(()=>[m(k,{class:"more-area",style:y({"font-size":e.moreFontSize,color:e.moreFontColor}),onClick:j},{default:i((()=>[z.value?(a(),r(k,{key:1,class:"tip disable-tip"},{default:i((()=>[p(f(e.moreText.nomore),1)])),_:1})):(a(),o(n,{key:0},[T.value?(a(),r(k,{key:1,class:"tip"},{default:i((()=>[!1!==e.moreIcon?(a(),o(n,{key:0},[!0===e.moreIcon?(a(),r(c,{key:0,class:"loading-icon",style:y({width:e.moreFontSize,height:e.moreFontSize}),src:u(I)},null,8,["style","src"])):e.moreIcon?(a(),r(S,{key:1,class:"loading-icon","font-family":e.moreIcon.fontFamily,prefix:e.moreIcon.prefix,name:e.moreIcon.name},null,8,["font-family","prefix","name"])):s("v-if",!0)],64)):s("v-if",!0),p(" "+f(e.moreText.loading),1)])),_:1})):(a(),r(k,{key:0,class:"tip"},{default:i((()=>[p(f(e.moreText.loadmore),1)])),_:1}))],64))])),_:1},8,["style"])]),!0):s("v-if",!0)],64)):(a(),o(n,{key:1},[l.$slots.loading?(a(),r(w,{key:0},{default:i((()=>[d(l.$slots,"loading",{},void 0,!0)])),_:3})):(a(),r(w,{key:1}))],64))])),_:3},8,["style"])],2112))],2112)}}}),[["__scopeId","data-v-78508232"]]),b=k(e({__name:"basic",setup(e){const t=l([]),s=(e,l,t,a)=>{setTimeout((()=>{e<=5?l([{id:3*(e-1)+1,title:"数据"+(3*(e-1)+1)},{id:3*(e-1)+2,title:"数据"+(3*(e-1)+2)},{id:3*(e-1)+3,title:"数据"+(3*(e-1)+3)}]):l()}),1e3)};return(e,l)=>{const u=g,d=_(F("be-lazy-list"),z);return a(),r(u,{class:"playground lazy-list-basic-page"},{default:i((()=>[m(d,{modelValue:t.value,"onUpdate:modelValue":l[0]||(l[0]=e=>t.value=e),onLoad:s,pullDownRefresh:""},{default:i((()=>[m(u,{class:"list"},{default:i((()=>[(a(!0),o(n,null,x(t.value,(e=>(a(),r(u,{class:"item",key:e.id},{default:i((()=>[p(f(e.title),1)])),_:2},1024)))),128))])),_:1})])),_:1},8,["modelValue"])])),_:1})}}}),[["__scopeId","data-v-3b60fe9a"]]);export{b as default};
